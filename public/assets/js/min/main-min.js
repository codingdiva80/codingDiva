function getFormattedDate(e){e||(e=-1),$today=new Date,$yesterday=new Date($today),$yesterday.setDate($today.getDate()+e);var n=$yesterday.getDate(),t=$yesterday.getMonth()+1,o=$yesterday.getFullYear();return n<10&&(n="0"+n),t<10&&(t="0"+t),$yesterday=t+"/"+n+"/"+o,$yesterday}const panels=document.querySelectorAll(".panel");function toggleOpen(){this.classList.toggle("open")}function toggleActive(e){e.propertyName.includes("flex")&&this.classList.toggle("open-active")}function initMap(){var e=new google.maps.Map(document.getElementById("map"),{zoom:8,center:{lat:37.7749,lng:-122.4194}});google.maps.event.addListener(e,"click",function(e){s({coords:e.latLng})});var n=new google.maps.Marker({position:{lat:42.4668,lng:-70.9495},map:e,icon:"https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png"}),t=new google.maps.InfoWindow({content:"<h1>Lynn MA</h1>"});n.addListener("click",function(){t.open(e,n)});for(var o=[{coords:{lat:42.4668,lng:-70.9495},iconImage:"https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png",content:"<h1>Lynn MA</h1>"},{coords:{lat:42.8584,lng:-70.93},content:"<h1>Amesbury MA</h1>"},{coords:{lat:42.7762,lng:-71.0773}}],a=0;a<o.length;a++)s(o[a]);function s(n){var t=new google.maps.Marker({position:n.coords,map:e});if(n.iconImage&&t.setIcon(n.iconImage),n.content){var o=new google.maps.InfoWindow({content:n.content});t.addListener("click",function(){o.open(e,t)})}}}panels.forEach(e=>e.addEventListener("click",toggleOpen)),panels.forEach(e=>e.addEventListener("transitionend",toggleActive)),$(function(){if(void 0!==typeof io){var e=io.connect(),n=$("#messageForm"),t=$("#message"),o=$("#chatWindow"),a=$("#usernameForm"),s=$("#loginForm"),r=$("#users"),l=$("#username"),c=$("#password"),g=$("#error");a.submit(function(n){n.preventDefault(),e.emit("new user",l.val(),function(e){e?($("#namesWrapper").hide(),$("#mainWrapper").show()):g.html("Username is taken")})}),s.submit(function(n){n.preventDefault();var t={username:l.val(),password:c.val()};e.emit("login",t,function(e){e?($("#namesWrapper").hide(),$("#mainWrapper").show()):g.html("Login incorrect")})}),e.on("usernames",function(e){var n="";for(i=0;i<e.length;i++)n+=e[i]+"<br>";r.html(n)}),n.submit(function(n){n.preventDefault(),e.emit("send message",t.val()),t.val("")}),e.on("new message",function(e){o.append("<strong>"+e.user+"</strong>: "+e.msg+"<br>")})}});